# export GF_SERVER_ROOT_URL="http://10.12.100.82:3000/"
# export GF_SECURITY_ADMIN_PASSWORD="admin"
# export GF_AUTH_GITHUB_ENABLED="true"
# export GF_AUTH_GITHUB_CLIENT_ID="Iv23liHq1R7P3PTeBXyE"
# export GF_AUTH_GITHUB_CLIENT_SECRET="6a99d66d23d3a8bb3f87b6a5a14d3b761a2ad607"
# export GF_AUTH_GITHUB_ALLOWED_ORGANIZATIONS="grafanaAPPemagueri"

# curl -X POST \
#   -H "Content-Type: application/json" \
#   -d '{"name":"apikeycurl", "role":"Admin"}' \
#   http://admin:admin@localhost:3000/api/auth/keys



cat << EOF > /etc/grafana/provisioning/dashboards/mydashboards.yaml
apiVersion: 1
providers:
- name: 'default'
  orgId: 1
  folder: ''
  type: file
  disableDeletion: false
  editable: true
  options:
    path: /var/lib/grafana/dashboards
EOF


cat << EOF >  /etc/grafana/provisioning/datasources/prometheus.yaml
apiVersion: 1
datasources:
- name: Prometheus
  type: prometheus
  url: http://localhost:9090
  access: proxy
  isDefault: true
EOF

# /etc/grafana/grafana.ini
[auth]
disable_login_form = true
disable_signout_menu = true

[security]
disable_initial_admin_creation = true
admin_user = disabled
admin_password = disabled

[users]
allow_sign_up = false
auto_assign_org = true
auto_assign_org_role = Viewer

[server]
enforce_domain = false
[dashboards]
default_home_dashboard_path = /var/lib/grafana/dashboards/dashboard.json

cat << EOF >  /etc/grafana/grafana.ini
[auth.anonymous]
enabled = true
org_name = Main Org.
org_role = Viewer

[dashboards]
default_home_dashboard_path = /var/lib/grafana/dashboards/dashboard.json
EOF